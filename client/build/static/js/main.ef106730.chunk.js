(this["webpackJsonpmern-client"]=this["webpackJsonpmern-client"]||[]).push([[0],{33:function(e,t){},478:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(60),o=a.n(c),l=(a(68),a(14)),s=a(4),i=function(){return r.a.createElement("header",{className:"bg-secondary mb-4 py-2 flex-row align-center"},r.a.createElement("div",{className:"container flex-row justify-space-between-lg justify-center align-center"},r.a.createElement(l.b,{to:"/",style:{fontWeight:700},className:"text-light"},r.a.createElement("h1",null,"Deep Thoughts"))," "))},u=function(){return r.a.createElement("footer",{className:"w-100 mt-auto bg-secondary p-4"},r.a.createElement("div",{className:"container"},"\xa92020 by Lernantino"))},m=a(6),p=a.n(m),d=a(11),f=a(7),h=function(e){var t=e.thoughts,a=e.title;return t.length?r.a.createElement("div",null,r.a.createElement("h3",null,a),t&&t.map((function(e){return r.a.createElement("div",{key:e.createdAt,className:"card mb-3"},r.a.createElement("p",{className:"card-header"},r.a.createElement(l.b,{to:"/profile/".concat(e.username),style:{fontWeight:700},className:"text-light"},e.username,"'s thought on"," ",new Date(parseInt(e.createdAt)).toString())," "),e.thought&&r.a.createElement("p",{className:"px-2 mt-2"},e.thought),e.image&&r.a.createElement("p",{className:"px-2"},r.a.createElement("img",{className:"mt-3 ml-4 thought-image",src:e.image,alt:"S3 bucket response"})))}))):r.a.createElement("h3",null,"No Thoughts Yet")},b=a(13),g=a(12),v=function(){var e=Object(n.useState)({username:"",thought:""}),t=Object(f.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(0),l=Object(f.a)(o,2),s=l[0],i=l[1],u=Object(n.useRef)(null),m=function(e){e.target.value.length<=280&&(c(Object(g.a)(Object(g.a)({},a),{},Object(b.a)({},e.target.name,e.target.value))),i(e.target.value.length))};return r.a.createElement("div",null,r.a.createElement("p",{className:"m-0 ".concat(280===s?"text-error":"")},"Character Count: ",s,"/280"),r.a.createElement("form",{className:"flex-row justify-center justify-space-between-md align-stretch",onSubmit:function(e){e.preventDefault(),function(){var e=Object(d.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/users",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,console.log(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),c({username:"",thought:""}),i(0)}},r.a.createElement("input",{placeholder:"Name",name:"username",value:a.username,className:"form-input col-12 col-md-9",onChange:m}),r.a.createElement("textarea",{placeholder:"Here's a new thought...",name:"thought",value:a.thought,className:"form-input col-12 col-md-9",onChange:m}),r.a.createElement("label",{className:"form-input col-12  p-1"},"Add an image to your thought:",r.a.createElement("input",{type:"file",ref:u,className:"form-input p-2"}),r.a.createElement("button",{className:"btn",onClick:function(e){e.preventDefault();var t=new FormData;t.append("image",u.current.files[0]),function(){var e=Object(d.a)(p.a.mark((function e(){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://3.18.112.37/api/image-upload",{mode:"cors",method:"POST",body:t});case 3:if((n=e.sent).ok){e.next=6;break}throw new Error(n.statusText);case 6:return e.next=8,n.json();case 8:return r=e.sent,c(Object(g.a)(Object(g.a)({},a),{},{image:r.Location})),e.abrupt("return",r.Location);case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()()},type:"submit"},"Upload")),r.a.createElement("button",{className:"btn col-12 col-md-3",type:"submit"},"Submit")))},E=function(){var e=Object(n.useState)(!1),t=Object(f.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([{}]),l=Object(f.a)(o,2),s=l[0],i=l[1];return Object(n.useEffect)((function(){(function(){var e=Object(d.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://3.18.112.37/api/users");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n=a.sort((function(e,t){return e.createdAt<t.createdAt?1:-1})),i(n),c(!0);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement("main",null,r.a.createElement("div",{className:"flex-row justify-space-between"},r.a.createElement("div",{className:"col-12 mb-3"},r.a.createElement(v,null)),r.a.createElement("div",{className:"col-12 mb-3 "},a?r.a.createElement(h,{thoughts:s,title:"Some Feed for Thought(s)..."}):r.a.createElement("div",null,"Loading..."))))},w=function(e){var t=Object(n.useState)({email:"",password:""}),a=Object(f.a)(t,2),c=a[0],o=a[1],l=function(e){var t=e.target,a=t.name,n=t.value;o(Object(g.a)(Object(g.a)({},c),{},Object(b.a)({},a,n)))},s=function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),console.log("formstate",c.email,c.password),o({email:"",password:""});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("main",{className:"flex-row justify-center mb-4"},r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("div",{className:"card"},r.a.createElement("h4",{className:"card-header"},"Login"),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:s},r.a.createElement("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",id:"email",value:c.email,onChange:l}),r.a.createElement("input",{className:"form-input",placeholder:"******",name:"password",type:"password",id:"password",value:c.password,onChange:l}),r.a.createElement("button",{className:"btn d-block w-100",type:"submit"},"Submit"))))))},j=function(){return r.a.createElement("div",null,"Oops, we couldn't find that page.")},N=function(e){return r.a.createElement("div",null,r.a.createElement("div",{className:"card mb-3"},r.a.createElement("p",{className:"card-header"},r.a.createElement("span",{style:{fontWeight:700},className:"text-light"},"Username")," ","thought on createdAt"),r.a.createElement("div",{className:"card-body"},r.a.createElement("p",null,"Thought Text"))))},y=a(62);a(74).config.update({region:"us-east-2"});var x=function(e){var t=Object(s.f)().username,a=Object(n.useState)(!1),c=Object(f.a)(a,2),o=c[0],l=c[1],i=Object(n.useState)([{username:t,createdAt:"",thought:""}]),u=Object(f.a)(i,2),m=u[0],b=u[1];return Object(n.useEffect)((function(){(function(){var e=Object(d.a)(p.a.mark((function e(){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://3.18.112.37/api/users/".concat(t));case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,console.log(n),b(Object(y.a)(n)),l(!0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}})()()}),[t]),r.a.createElement("div",null,r.a.createElement("div",{className:"flex-row mb-3"},r.a.createElement("h2",{className:"bg-dark text-secondary p-3 display-inline-block"},"Viewing ",t?"".concat(t,"'s"):"your"," profile.")),r.a.createElement("div",{className:"flex-row justify-space-between mb-3"},r.a.createElement("div",{className:"col-12 mb-3 col-lg-8"},o?r.a.createElement(h,{thoughts:m,title:"".concat(t,"'s thoughts...")}):r.a.createElement("div",null,"Loading..."))),r.a.createElement("div",{className:"mb-3"}," ",r.a.createElement(v,{name:t})))},O=function(){var e=Object(n.useState)({username:"",email:"",password:""}),t=Object(f.a)(e,2),a=t[0],c=t[1],o=function(e){var t=e.target,n=t.name,r=t.value;c(Object(g.a)(Object(g.a)({},a),{},Object(b.a)({},n,r)))},l=function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),console.log("Formstate: ",a.username,a.email,a.password);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("main",{className:"flex-row justify-center mb-4"},r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("div",{className:"card"},r.a.createElement("h4",{className:"card-header"},"Sign Up"),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:l},r.a.createElement("input",{className:"form-input",placeholder:"Your username",name:"username",type:"username",id:"username",value:a.username,onChange:o}),r.a.createElement("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",id:"email",value:a.email,onChange:o}),r.a.createElement("input",{className:"form-input",placeholder:"******",name:"password",type:"password",id:"password",value:a.password,onChange:o}),r.a.createElement("button",{className:"btn d-block w-100",type:"submit"},"Submit"))))))};var k=function(){return r.a.createElement(l.a,null,r.a.createElement("div",{className:"flex-column justify-flex-start min-100-vh"},r.a.createElement(i,null),r.a.createElement("div",{className:"container"},r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",component:E}),r.a.createElement(s.a,{exact:!0,path:"/login",component:w}),r.a.createElement(s.a,{exact:!0,path:"/signup",component:O}),r.a.createElement(s.a,{exact:!0,path:"/profile/:username",component:x}),r.a.createElement(s.a,{exact:!0,path:"/thought/:id",component:N}),r.a.createElement(s.a,{component:j}))),r.a.createElement(u,null)))},S=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function C(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");S?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):C(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):C(t,e)}))}}()},63:function(e,t,a){e.exports=a(478)},68:function(e,t,a){}},[[63,1,2]]]);
//# sourceMappingURL=main.ef106730.chunk.js.map